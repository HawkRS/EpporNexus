/*!
 * Responsive Tables v6.1.3 (http://gergeo.se/RWD-Table-Patterns)
 * This is an awesome solution for responsive tables with complex data.
 * Authors: Nadan Gergeo <nadan@blimp.se> (www.blimp.se), Lucas Wiener <lucas@blimp.se> & "Maggie Wachs (www.filamentgroup.com)"
 * Licensed under MIT (https://github.com/nadangergeo/RWD-Table-Patterns/blob/master/LICENSE-MIT)
 */(function(e){var l=function(t,a){var i=this;if(this.options=a,this.$tableWrapper=null,this.$tableScrollWrapper=e(t),this.$table=e(t).find("table"),this.$table.length!==1)throw new Error("Exactly one table is expected in a .table-responsive div.");this.$tableScrollWrapper.attr("data-pattern",this.options.pattern),this.id=this.$table.prop("id")||this.$tableScrollWrapper.prop("id")||"id"+Math.random().toString(16).slice(2),this.$tableClone=null,this.$stickyTableHeader=null,this.$thead=this.$table.find("thead"),this.$hdrRows=this.$thead.find("tr"),this.$hdrCells=this.$hdrRows.first().find("th"),this.$tbody=this.$table.find("tbody"),this.$bodyRows=this.$tbody.find("tr"),this.$footRows=this.$table.find("tfoot").find("tr"),this.$bodyAndFootRows=e.merge(this.$bodyRows,this.$footRows),this.$btnToolbar=null,this.$dropdownGroup=null,this.$dropdownBtn=null,this.$dropdownContainer=null,this.$displayAllBtn=null,this.$focusGroup=null,this.$focusBtn=null,this.displayAllTrigger="display-all-"+this.id+".responsive-table",this.idPrefix=this.id+"-col-",this.headerColIndices={},this.headerRowIndices={},this.displayValue="table-cell",e("html").hasClass("lt-ie9")&&(this.displayValue="inline"),this.wrapTable(),this.createButtonToolbar(),this.buildHeaderCellIndices(),this.setupTableHeader(),this.setupBodyAndFootRows(),this.options.stickyTableHeader&&this.createStickyTableHeader(),this.$dropdownContainer.is(":empty")&&this.$dropdownGroup.hide(),this.bindClickOnRows(),this.options.sortable&&(this.$tableScrollWrapper.attr("data-sortable",!0),this.$tableScrollWrapper.attr("data-sorting-active",!0),this.makeSortableByColumns(),this.shiftKeyActive=!1,e(document).on("keydown keyup",function(o){i.shiftKeyActive=o.shiftKey})),e(window).bind("orientationchange resize "+this.displayAllTrigger,function(){i.$dropdownContainer.find("input").trigger("updateCheck"),e.proxy(i.updateSpanningCells(),i)}).trigger("resize")};l.DEFAULTS={pattern:"priority-columns",stickyTableHeader:!0,fixedNavbar:".navbar.fixed-top",addDisplayAllBtn:!0,addFocusBtn:!0,focusBtnIcon:"fa fa-crosshairs",mainContainer:window,sortable:!1,compareFunction:function(t,a,i){return t[0].localeCompare(a[0],void 0,{numeric:!0})<0?-i:i},i18n:{focus:"Focus",display:"Display",displayAll:"Display all"}},l.prototype.wrapTable=function(){this.$tableScrollWrapper.wrap('<div class="table-wrapper"/>'),this.$tableWrapper=this.$tableScrollWrapper.parent()},l.prototype.bindClickOnRows=function(){var t=this;this.options.addFocusBtn&&(this.$bodyAndFootRows.unbind("click"),this.$bodyAndFootRows.click(function(){t.focusOnRow(e(this))}))},l.prototype.createButtonToolbar=function(){var t=this;this.$btnToolbar=e('[data-responsive-table-toolbar="'+this.id+'"]'),this.$btnToolbar.addClass("btn-toolbar justify-content-between"),this.$btnToolbar.length===0&&(this.$btnToolbar=e('<div class="btn-toolbar justify-content-between" />')),this.$dropdownGroup=e('<div class="btn-group dropdown-btn-group dropdown" />'),this.$dropdownBtn=e('<button type="button" class="btn btn-sm btn-outline-primary dropdown-toggle" id="displayMenu'+this.id+'" data-bs-toggle="dropdown" aria-expanded="false">'+this.options.i18n.display+' <span class="caret"></span></button>'),this.$dropdownContainer=e('<ul class="dropdown-menu" aria-labelledby="displayMenu'+this.id+'"/>'),this.options.addFocusBtn?(this.$focusGroup=e('<div class="btn-group focus-btn-group" />'),this.$focusBtn=e('<button type="button" class="btn btn-sm btn-outline-primary">'+this.options.i18n.focus+"</button>"),this.options.focusBtnIcon&&this.$focusBtn.prepend('<span class="'+this.options.focusBtnIcon+'"></span> '),this.$focusGroup.append(this.$focusBtn),this.$btnToolbar.append(this.$focusGroup),this.$focusBtn.click(function(){t.activateFocus()})):this.$btnToolbar.append(e("<div />")),this.options.addDisplayAllBtn&&(this.$displayAllBtn=e('<button type="button" class="btn btn-sm btn-outline-primary">'+this.options.i18n.displayAll+"</button>"),this.$dropdownGroup.append(this.$displayAllBtn),this.$table.hasClass("display-all")&&this.$displayAllBtn.addClass("btn-primary"),this.$displayAllBtn.click(function(){e.proxy(t.displayAll(null,!0),t)})),this.$dropdownGroup.append(this.$dropdownBtn).append(this.$dropdownContainer),this.$btnToolbar.append(this.$dropdownGroup),this.$tableScrollWrapper.before(this.$btnToolbar)},l.prototype.clearAllFocus=function(){this.$bodyAndFootRows.removeClass("unfocused"),this.$bodyAndFootRows.removeClass("focused")},l.prototype.activateFocus=function(){this.clearAllFocus(),this.$focusBtn&&this.$focusBtn.toggleClass("btn-primary"),this.$table.toggleClass("focus-on")},l.prototype.focusOnRow=function(t){if(this.$table.hasClass("focus-on")){var a=e(t).hasClass("focused");this.clearAllFocus(),a||(this.$bodyAndFootRows.addClass("unfocused"),e(t).addClass("focused"))}},l.prototype.displayAll=function(t,a){this.$displayAllBtn&&this.$displayAllBtn.toggleClass("btn-primary",t),this.$table.toggleClass("display-all",t),this.$tableClone&&this.$tableClone.toggleClass("display-all",t),a&&e(window).trigger(this.displayAllTrigger)},l.prototype.preserveDisplayAll=function(){e(this.$table).find("th, td").css("display",this.displayValue),this.$tableClone&&e(this.$tableClone).find("th, td").css("display",this.displayValue)},l.prototype.createStickyTableHeader=function(){var t=this;t.$tableClone=t.$table.clone(),t.$tableClone.prop("id",this.id+"-clone"),t.$tableClone.find("[id]").each(function(){e(this).prop("id",e(this).prop("id")+"-clone")}),t.$tableClone.wrap('<div class="sticky-table-header"/>'),t.$stickyTableHeader=t.$tableClone.parent(),t.$stickyTableHeader.css("height",t.$thead.height()+2),t.$table.before(t.$stickyTableHeader),e(this.options.mainContainer).on("scroll",function(a){t.updateStickyTableHeader()}),e(window).on("resize",function(a){t.updateStickyTableHeader()}),e(t.$tableScrollWrapper).on("scroll",function(a){t.updateStickyTableHeader()}),t.useFixedSolution=!b()||m()>=8,t.useFixedSolution?t.$tableScrollWrapper.addClass("fixed-solution"):t.$tableScrollWrapper.addClass("absolute-solution")},l.prototype.updateStickyTableHeader=function(){var t=this,a=0,i=t.$table.offset().top,o=e(this.options.mainContainer).scrollTop()-1,s=t.$table.height()-t.$stickyTableHeader.height(),n=o+e(this.options.mainContainer).height()-e(document).height(),p=0;if(e(t.options.fixedNavbar).length){var d=e(t.options.fixedNavbar).first();p=d.outerHeight(),o=o+p}var c;if(this.options.mainContainer===window?c=o>i&&o<i+t.$table.height():c=i<=0&&-i<t.$table.height(),t.useFixedSolution)if(t.$stickyTableHeader.scrollLeft(t.$tableScrollWrapper.scrollLeft()),a=p-1,this.options.mainContainer===window&&o-i>s?(a-=o-i-s,t.$stickyTableHeader.addClass("border-radius-fix")):this.options.mainContainer!==window&&-i>s?(a-=-i-s,t.$stickyTableHeader.addClass("border-radius-fix")):t.$stickyTableHeader.removeClass("border-radius-fix"),c){t.$stickyTableHeader.css({visibility:"visible",top:a+"px",width:t.$tableScrollWrapper.innerWidth()+"px"});return}else t.$stickyTableHeader.css({visibility:"hidden",width:"auto"});else{var r=400;this.options.mainContainer===window?a=o-i-1:a=-i-1,a<0?a=0:a>s&&(a=s),this.options.mainContainer===window&&n>0&&(a=a-n),c?(t.$stickyTableHeader.css({visibility:"visible"}),t.$stickyTableHeader.animate({top:a+"px"},r),t.$thead.css({visibility:"hidden"})):t.$stickyTableHeader.animate({top:"0"},r,function(){t.$thead.css({visibility:"visible"}),t.$stickyTableHeader.css({visibility:"hidden"})})}},l.prototype.setupTableHeader=function(){var t=this,a=0;t.$hdrCells.each(function(i){var o=e(this),s=o.prop("id"),n=o.text();s||(s=t.idPrefix+i,o.prop("id",s)),n===""&&(n=o.attr("data-col-name")),o.attr("data-pos-x",i+a);var p=parseInt(o.prop("colSpan"));if(p>1&&(a+=p-1),o.is("[data-priority]")&&o.data("priority")!==-1){var d=e('<li class="checkbox-row"><input type="checkbox" name="toggle-'+s+'" id="toggle-'+s+'" value="'+s+'" /> <label for="toggle-'+s+'">'+n+"</label></li>"),c=d.find("input");t.$dropdownContainer.append(d),d.click(function(r){r.stopPropagation(),c.prop("checked",!c.prop("checked")),c.trigger("change")}),e("html").hasClass("lt-ie9")&&c.click(function(){e(this).trigger("change")}),d.find("label").click(function(r){r.stopPropagation()}),d.find("input").click(function(r){r.stopPropagation()}).change(function(){var r=e(this),f=r.val(),u=t.$tableWrapper.find("#"+f+", #"+f+"-clone, [data-columns~="+f+"]");t.$table.hasClass("display-all")&&(e.proxy(t.preserveDisplayAll(),t),t.$table.removeClass("display-all"),t.$tableClone&&t.$tableClone.removeClass("display-all"),t.$displayAllBtn.removeClass("btn-primary")),u.each(function(){var h=e(this);if(r.is(":checked")){if(!h.closest("thead").length&&h.css("display")!=="none"){var y=Math.min(parseInt(h.prop("colSpan"))+1,h.attr("data-org-colspan"));h.prop("colSpan",y)}h.css("display",t.displayValue)}else!h.closest("thead").length&&parseInt(h.prop("colSpan"))>1?h.prop("colSpan",parseInt(h.prop("colSpan"))-1):h.hide()})}).bind("updateCheck",function(){o.css("display")!=="none"?e(this).prop("checked",!0):e(this).prop("checked",!1)})}}),e.isEmptyObject(this.headerRowIndices)||t.setupRow(this.$thead.find("tr:eq(1)"),this.headerRowIndices,1),this.$hdrRows.first().attr("data-pos-y",0)},l.prototype.setupBodyAndFootRows=function(){var t=this;t.$tbody=t.$table.find("tbody"),t.$bodyRows=t.$tbody.find("tr"),t.$footRows=t.$table.find("tfoot").find("tr"),t.$bodyRows.each(function(a){t.setupRow(e(this),t.headerColIndices,a)}),t.$footRows.each(function(a){t.setupRow(e(this),t.headerColIndices,a)})},l.prototype.setupRow=function(t,a,i){var o=this;if(!t.data("setup")){t.data("setup",!0),t.attr("data-pos-y",i);var s=0;t.find("th, td").each(function(n){var p=e(this),d="",c=p.prop("colSpan");p.attr("data-org-colspan",c),c>1&&p.addClass("spn-cell");for(var r=s;r<s+c;r++){d=d+" "+o.idPrefix+a[r];var f=o.$table.find("#"+o.idPrefix+a[r]),u=f.attr("data-priority");u&&p.attr("data-priority",u)}d=d.substring(1),p.attr("data-columns",d);var h=0;if(t.parent().prop("tagName")==="THEAD"&&t.attr("data-pos-y")==="1"&&o.rowspansBeforeIndex)var h=o.rowspansBeforeIndex[n]||0;p.attr("data-pos-x",n+h),s=s+c})}},l.prototype.buildHeaderCellIndices=function(){var t=this,a={};this.headerColIndices={},this.headerRowIndices={};var i=0,o=0;if(this.$hdrCells.each(function(n){for(var p=e(this),d=p.prop("colSpan"),c=p.prop("rowSpan"),r=0;r<d;r++)t.headerColIndices[i+n+r]=n,i+n+r>=0&&(a[i+n+r-o]=o);c>1&&o++,i+=d-1}),this.$hdrRows.length===2){var s=e(this.$hdrRows[1]);s.find("th").each(function(n){t.headerRowIndices[n]=t.headerColIndices[a[n]+n],t.rowspansBeforeIndex=a})}else if(this.$hdrRows.length>2)throw new Error("This plugin doesnt support more than two rows in thead.")},l.prototype.update=function(){this.$bodyAndFootRows=this.$table.find("tbody, tfoot").find("tr"),this.setupBodyAndFootRows(),this.bindClickOnRows(),this.$tableClone.find("tbody, tfoot").remove();var t=this.$bodyAndFootRows.clone();t.find("[id]").each(function(){e(this).prop("id",e(this).prop("id")+"-clone")}),t.appendTo(this.$tableClone),this.$dropdownContainer.find("input").trigger("change")},l.prototype.updateSpanningCells=function(){var t=this;t.$table.find(".spn-cell").each(function(){for(var a=e(this),i=a.attr("data-columns").split(" "),o=i.length,s=0,n=0;n<o;n++)e("#"+i[n]).css("display")==="none"&&s++;s!==o?a.css("display",t.displayValue):a.hide(),a.prop("colSpan",Math.max(o-s,1))})},l.prototype.getSortedColumn=function(t,a){for(var i=this,o=0;o<t.length;o++)t[o]=[t[o],o];var s;i.options.compareFunction instanceof Function&&(s=function(p,d){return i.options.compareFunction(p,d,a)}),t.sort(s),t.indices=[];for(var n=0;n<t.length;n++)t.indices.push(t[n][1]),t[n]=t[n][0];return t},l.prototype.getRestoredColumn=function(t){for(var a=0;a<t.length;a++)t[a]=[t[a],a,e(t[a]).attr("data-pos-y")];t.sort(function(o,s){return o[2].localeCompare(s[2],void 0,{numeric:!0})<0?-1:1}),t.indices=[];for(var i=0;i<t.length;i++)t.indices.push(t[i][1]),t[i]=t[i][0];return t},l.prototype.sortColumn=function(t,a){var i=this,o=i.$tbody,s=Number.isInteger(t)?i.$thead.find("th[data-pos-x="+t+"]"):e(t),n=s.prop("id"),p=n.indexOf("-clone")===n.length-6?e("#"+n.slice(0,n.length-6)):e("#"+e(t).prop("id")+"-clone"),d=o.find("tr"),c=s.data("pos-x"),r=d.find("[data-pos-x="+c+"]"),f=s.attr("data-sorted");i.$allHdrCells||(i.$hdrCellsClones=i.$tableClone?i.$tableClone.find("thead > tr > th"):[],i.$allHdrCells=e.merge(this.$hdrRows.find("th"),i.$hdrCellsClones)),i.$allHdrCells.filter("[data-sorted]").each(function(){e(this).removeAttr("data-sorted")});var u;i.shiftKeyActive&&f==="desc"||!f&&!i.shiftKeyActive||a===1?(s.attr("data-sorted","asc"),p.attr("data-sorted","asc"),u=1):i.shiftKeyActive&&!f||f==="asc"&&!i.shiftKeyActive||a===-1?(s.attr("data-sorted","desc"),p.attr("data-sorted","desc"),u=-1):(i.shiftKeyActive&&f==="asc"||f==="desc"&&!i.shiftKeyActive||a===0)&&(s.removeAttr("data-sorted"),p.removeAttr("data-sorted"),u=0),u!==0?(r=r.map(function(y,v){return e(v).attr("data-value")||v.innerText}).get(),r=i.getSortedColumn(r,u)):r=i.getRestoredColumn(d.get());for(var h=0;h<r.length;h++)d.eq(r.indices[h]).clone().appendTo(o);for(var h=0;h<r.length;h++)d.eq(h).remove();i.$bodyAndFootRows=i.$table.find("tbody, tfoot").find("tr"),i.bindClickOnRows()},l.prototype.makeSortableByColumns=function(){var t=this;t.$hdrCellsClones=t.$tableClone?t.$tableClone.find("thead > tr > th"):[],t.$allHdrCells=e.merge(this.$hdrRows.find("th"),t.$hdrCellsClones),t.$allHdrCells.each(function(a){e(this).prop("colSpan")>1||e(this).click(function(){t.sortColumn(this)})})};var w=e.fn.responsiveTable;e.fn.responsiveTable=function(t,a){return this.each(function(){var i=e(this),o=i.data("responsiveTable"),s=e.extend({},l.DEFAULTS,i.data(),typeof t=="object"&&t);s.pattern!==""&&(o||i.data("responsiveTable",o=new l(this,s)),typeof t=="string"&&o[t].apply(o,a))})},e.fn.responsiveTable.Constructor=l,e.fn.responsiveTable.noConflict=function(){return e.fn.responsiveTable=w,this},e(document).on("ready.responsive-table.data-api",function(){e(".table-responsive[data-pattern]").each(function(){var t=e(this);t.responsiveTable(t.data())})}),e(document).on("click.dropdown.data-api",".dropdown-menu .checkbox-row",function(t){t.stopPropagation()});function C(){return typeof window.matchMedia<"u"||typeof window.msMatchMedia<"u"||typeof window.styleMedia<"u"}function g(){return"ontouchstart"in window}function b(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))}function m(){if(b()){var t=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""));return t}else return 0}e(document).ready(function(){e("html").removeClass("no-js").addClass("js"),C()?e("html").addClass("mq"):e("html").addClass("no-mq"),g()?e("html").addClass("touch"):e("html").addClass("no-touch")})})(jQuery);$(function(){$(".table-responsive").responsiveTable({addDisplayAllBtn:"btn btn-primary"})});
